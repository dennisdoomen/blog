---

title: Why I created Fluent Assertions in the first place
date: '2011-07-29T16:11:00.002+02:00'

tags:
- Fluent Assertions
- dotnetmag
- C#
- Testing
modified_time: '2016-04-23T14:54:04.263+02:00'
thumbnail: http://lh4.ggpht.com/-TuAorOjJXQ4/TjK_fza6W8I/AAAAAAAAIh0/HytVNTA2g_c/s72-c/clip_image001%25255B6%25255D_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-15137028.post-5063937538200903379
blogger_orig_url: http://www.continuousimprover.com/2011/07/why-i-created-fluent-assertions-in.html
---

A few weeks ago I read <a href="http://elegantcode.com/2011/05/28/the-value-of-open-source-is-the-vision-not-the-source-code/">The value of open-source is the vision not the source code</a> and that made me think about my own reasons for starting <a href="http://www.fluentassertions.com/">Fluent Assertions</a>, now more than a year ago. In the light of that article, lets briefly go over my own goals for Fluent Assertions. <br /><strong>The intention of a unit test must be clear from the code</strong> <br />An intention revealing unit test has the following characteristics <br /><ol><li>The arrange, act and assertion parts are clearly distinguishable <li>The name represents the functional scenario the test verifies <li>The assertion provides sufficient context to understand why a specific value is expected</li></li></li></ol>For instance, consider this small test. <br /><br /><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black;"><span style="font-size: 11pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [</span></span><span style="font-size: 11pt;"><span style="color: darkblue;">TestMethod</span></span></span><span style="font-size: 11pt;"><span style="font-family: Calibri;"><span style="color: black;">]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">public</span><span style="color: black;">&nbsp;</span><span style="color: blue;">void</span><span style="color: black;">&nbsp;</span><span style="color: darkcyan;">When_assigning_the_endorsing_authorities_it_should_update_the_property</span></span><span style="font-family: Calibri;"><span style="color: black;">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Arrange</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: darkblue;">Permit</span><span style="color: black;"> permit = </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">PermitBuilder</span><span style="color: black;">().</span><span style="color: darkcyan;">Build</span></span><span style="font-family: Calibri;"><span style="color: black;">();<br /><span style="mso-spacerun: yes;">&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Act</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; permit.</span><span style="font-family: Calibri;"><span style="color: darkcyan;">AssignEndorsingAuthorities</span><span style="color: black;">(</span><span style="color: blue;">new</span><span style="color: black;">[] { </span><span style="color: #a31515;">"john"</span><span style="color: black;">, </span><span style="color: #a31515;">"jane"</span></span><span style="font-family: Calibri;"><span style="color: black;">});<br /><span style="mso-spacerun: yes;">&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Assert</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; permit.</span><span style="font-family: Calibri;"><span style="color: purple;">EndorsingAuthorities</span><span style="color: black;">.</span><span style="color: darkcyan;">Should</span><span style="color: black;">().</span><span style="color: darkcyan;">BeEquivalentTo</span><span style="color: black;">(</span><span style="color: blue;">new</span><span style="color: black;">[] { </span><span style="color: #a31515;">"john"</span><span style="color: black;">, </span><span style="color: #a31515;">"jane"</span></span></span><span style="font-family: Calibri;"><span style="color: black; font-size: 11pt;">});<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></div><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black; font-size: 11pt;"></span></span></div><div style="line-height: normal; margin: 0in;"><span style="font-family: &quot;calibri&quot;;"><span style="color: black; font-size: 11pt;"></span></span></div>Yes, I agree that it's a very simple test and that this scenario should be tested as part of a larger scope. Nonetheless, it clearly illustrates my three points. Now consider this test .<br /><br /><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black;"><span style="font-size: 11pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [</span></span><span style="font-size: 11pt;"><span style="color: darkblue;">TestMethod</span></span></span><span style="font-size: 11pt;"><span style="font-family: Calibri;"><span style="color: black;">]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">public</span><span style="color: black;">&nbsp;</span><span style="color: blue;">void</span><span style="color: black;">&nbsp;</span><span style="color: darkcyan;">When_a_substance_is_specified_that_is_not_required_it_should_throw</span></span><span style="font-family: Calibri;"><span style="color: black;">()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Arrange</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: blue;">var</span><span style="color: black;"> permit = </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">PermitBuilder</span><span style="color: black;">().</span><span style="color: darkcyan;">Build</span></span><span style="font-family: Calibri;"><span style="color: black;">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">var</span><span style="color: black;"> someUser = </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">UserBuilder</span><span style="color: black;">().</span><span style="color: darkcyan;">Build</span></span><span style="font-family: Calibri;"><span style="color: black;">();<br /><span style="mso-spacerun: yes;">&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">var</span><span style="color: black;"> dataMapper = </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">InMemoryDataMapper</span></span><span style="font-family: Calibri;"><span style="color: black;">(permit, someUser);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">var</span><span style="color: black;"> service = </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">CommandServiceBuilder</span><span style="color: black;">().</span><span style="color: darkcyan;">Using</span><span style="color: black;">(dataMapper).</span><span style="color: darkcyan;">Build</span></span><span style="font-family: Calibri;"><span style="color: black;">();<br /><span style="mso-spacerun: yes;">&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Act</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue; font-family: Calibri;">try</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; service.</span><span style="font-family: Calibri;"><span style="color: darkcyan;">Execute</span><span style="color: black;">(</span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">AddMeasurementsCommand</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: purple;">Id</span><span style="color: black;"> = permit.</span><span style="color: purple;">Id</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Version</span><span style="color: black;"> = permit.</span><span style="color: purple;">Version</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Username</span><span style="color: black;"> = someUser.</span><span style="color: purple;">Username</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Measurements</span><span style="color: black;"> = </span><span style="color: blue;">new</span></span><span style="font-family: Calibri;"><span style="color: black;">[]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">MeasurementData</span><span style="color: black;">(</span><span style="color: #a31515;">"Oxygen"</span><span style="color: black;">, 1.1d, </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">DateTime</span></span></span><span style="font-family: Calibri;"><span style="font-size: 11pt;"><span style="color: black;">(2011, 4, 13, 16, 30, 0))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br /><br /><span style="mso-spacerun: yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="color: darkblue;">Assert</span><span style="color: black;">.</span><span style="color: darkcyan;">Fail</span><span style="color: black;">(</span><span style="color: #a31515;">"The expected exception was not thrown"</span></span><span style="color: black; font-size: 11pt;">);</span></span></div><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black;"><span style="font-size: 11pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 11pt;"><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span></span><span style="font-size: 11pt;"><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Assert</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: blue;">catch</span><span style="color: black;"> (</span><span style="color: darkblue;">InvalidOperationException</span></span><span style="font-family: Calibri;"><span style="color: black;"> exc)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: darkblue;">Assert</span><span style="color: black;">.</span><span style="color: darkcyan;">IsTrue</span><span style="color: black;">(exc.</span><span style="color: purple;">Message</span><span style="color: black;">.</span><span style="color: darkcyan;">Contains</span><span style="color: black;">(</span><span style="color: #a31515;">"not required"</span></span></span><span style="font-family: Calibri;"><span style="color: black; font-size: 11pt;">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></div>It is testing a particular business action against one of its business rules. It's quite easy to understand, but there's still a lot of noise caused by the <span style="font-family: &quot;consolas&quot;;">try...catch</span> construction and the additional <span style="font-family: &quot;consolas&quot;;">Assert.Fail()</span> to assert that an exception was thrown at all. Less important, but still a bit obscure is the usage of the <span style="font-family: &quot;consolas&quot;;">DateTime</span> constructor. With Fluent Assertions, we can do better. <br /><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black;"><span style="font-size: 11pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 11pt;"><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span></span><span style="font-size: 11pt;"><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Act</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: darkblue;">Action</span><span style="color: black;"> action = () =&gt; service.</span><span style="color: darkcyan;">Execute</span><span style="color: black;">(</span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">AddMeasurementsCommand</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: Calibri;"><span style="color: purple;">Id</span><span style="color: black;"> = permit.</span><span style="color: purple;">Id</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Version</span><span style="color: black;"> = permit.</span><span style="color: purple;">Version</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Username</span><span style="color: black;"> = user.</span><span style="color: purple;">Username</span></span><span style="font-family: Calibri;"><span style="color: black;">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: purple;">Measurements</span><span style="color: black;"> = </span><span style="color: blue;">new</span></span><span style="font-family: Calibri;"><span style="color: black;">[]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: blue;">new</span><span style="color: black;">&nbsp;</span><span style="color: darkblue;">MeasurementData</span><span style="color: black;">(</span><span style="color: #a31515;">"Oxygen"</span><span style="color: black;">, 1.1d, 13.</span><span style="color: darkcyan;">April</span><span style="color: black;">(2011).</span><span style="color: darkcyan;">At</span></span><span style="font-family: Calibri;"><span style="color: black;">(16, 30)),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br /><span style="mso-spacerun: yes;">&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green;">//-----------------------------------------------------------------------------------------------------------</span></span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">// Assert</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: green; font-family: Calibri;">//-----------------------------------------------------------------------------------------------------------</span><br /><span style="color: black; font-family: Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; action<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .</span><span style="font-family: Calibri;"><span style="color: darkcyan;">ShouldThrow</span><span style="color: black;">&lt;</span><span style="color: darkblue;">InvalidOperationException</span></span></span><span style="font-family: Calibri;"><span style="font-size: 11pt;"><span style="color: black;">&gt;()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .</span><span style="color: darkcyan;">WithMessage</span><span style="color: black;">(</span><span style="color: #a31515;">"not required"</span><span style="color: black;">, </span><span style="color: darkblue;">ComparisonMode</span><span style="color: black;">.</span><span style="color: purple;"><strong>Substring</strong></span></span><span style="color: black; font-size: 11pt;">);</span></span></div><div style="line-height: normal; margin: 0in;"><span style="font-family: Calibri;"><span style="color: black; font-size: 11pt;"><br /></span></span>Something similar is also possible for verifying that events have been raised, with special support for the <span style="font-family: &quot;consolas&quot;;">INotifyPropertyChanged</span> interface so common in Silverlight and WPF projects. I blogged about that <a href="http://www.continuousimprover.com/2011/01/verifying-propertychanged-events-in.html">earlier this year</a>. </div><strong>A unit test that fails should explain as best as possible what went wrong</strong> <br />Nothing is more annoying then a unit test that fails without clearly explaining why. More than often, you need to set a breakpoint and start up the debugger to be able to figure out what went wrong. Jeremy D. Miller <a href="http://codebetter.com/jeremymiller/2005/08/18/testing-granularity-feedback-cycles-and-holistic-development/">once</a> gave the advice to "keep out of the debugger hell" and I can only agree with that. <br />For instance, only test a single condition per test case. If you don't, and the first condition fails, the test engine will not even try to test the other conditions. But if any of the others fail, you'll be on your own to figure out which one. I often run into this problem when developers try to combine multiple related tests that test a member using different parameters into one test case. If you really need to do that, consider using a <a href="http://xunitpatterns.com/Parameterized%20Test.html">parameterized</a> test that is being called by several clearly named test cases. <br />Obviously I designed Fluent Assertions to help you in this area. Not only by using clearly named assertion methods, but also by making sure the failure message provides as much information as possible. Consider this example: <br /><div style="line-height: normal; margin: 0in;"><span style="font-family: &quot;calibri&quot;;"><span style="font-size: 11pt;"><span style="color: #a31515;">"1234567890"</span><span style="color: black;">.</span><span style="color: darkcyan;">Should</span><span style="color: black;">().</span><span style="color: darkcyan;">Be</span><span style="color: black;">(</span><span style="color: #a31515;">"0987654321"</span></span><span style="color: black; font-size: 11pt;">);</span></span></div><div style="line-height: normal; margin: 0in;"><span style="font-family: &quot;calibri&quot;;"><span style="color: black; font-size: 11pt;"><br /></span></span>This will be reported as: <br /><br /><a href="http://lh3.ggpht.com/-CRwTIbsz8bA/TjK_fSZHjjI/AAAAAAAAIhw/3g-ohBmem8I/s1600-h/clip_image001%25255B6%25255D%25255B4%25255D.png"><img alt="clip_image001[6]" src="http://lh4.ggpht.com/-TuAorOjJXQ4/TjK_fza6W8I/AAAAAAAAIh0/HytVNTA2g_c/clip_image001%25255B6%25255D_thumb%25255B2%25255D.png?imgmax=800" height="51" style="display: inline;" title="clip_image001[6]" width="231" /></a> <br /><br />The fact that both strings are displayed on a separate line is on purpose and happens if any of them is longer than 8 characters. However, if that's not enough, all assertion methods take an optional formatted reason with placeholders, similarly to String.Format, that you can use to enrich the failure message. For instance, the assertion <br /><br /></div><div style="line-height: normal; margin: 0in;"><span style="font-family: &quot;calibri&quot;;"><span style="color: blue;"><span style="font-size: 11pt;">new</span></span><span style="font-size: 11pt;"><span style="color: black;">[] { 1, 2, 3 }.</span><span style="color: darkcyan;">Should</span><span style="color: black;">().</span><span style="color: darkcyan;">Contain</span><span style="color: black;">(item =&gt; item &gt; 3, </span><span style="color: #a31515;">"at least {0} item should be larger than 3"</span></span><span style="color: black; font-size: 11pt;">, 1);</span></span></div>will fail with: <br /><br /><a href="http://lh4.ggpht.com/-820NKb40J34/TjK_gTqYSPI/AAAAAAAAIh4/XTPJWfDCP7g/s1600-h/clip_image002%25255B6%25255D%25255B4%25255D.png"><img alt="clip_image002[6]" src="http://lh4.ggpht.com/-bPifQdmVWH4/TjK_gztuiBI/AAAAAAAAIh8/_fuhX5zmh2U/clip_image002%25255B6%25255D_thumb%25255B2%25255D.png?imgmax=800" height="21" style="display: inline;" title="clip_image002[6]" width="589" /></a><br /><strong>The code itself should be a great example of what high-quality code should look like</strong> <br />This goal should be rather obvious. I don't only want to deliver a great framework, I also want people to learn from it. And isn't that the single biggest reason why people join open-source projects? However, the article I mentioned before states that the vision behind an open-source project should be much more important than the quality of the source code. As you might expect, I don't agree with that. In fact, one of the challenges I ran into was my desire to control all code contributions so that they complied with <a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">Clean Code</a>, my own <a href="http://csharpguidelines.codeplex.com/">coding guidelines</a> and my ideas about unit testing. <br />At first the article made me doubt about the approach to take, but then I decided that the quality of the code was just as important. I now respond to all contribution requests with some information on the way I'd like FA to see evolve. Additionally, I've set-up a dedicated contribution branch that they can use. Depending on the quality of their contribution, merging them into the main branch requires a corresponding amount of work at my side. I know that this might keep some contributors away, but up to now, most of of them agreed with my approach and were willing to deliver high-quality code.