---

title: The all new coding guidelines for C# 3.0, 4.0 and 5.0 have been published!
date: '2012-11-26T21:38:00.001+01:00'

tags:
- Visual Studio
- ALM
- dotnetmag
- C#
- Quality
- Coding Guidelines
modified_time: '2012-11-27T20:29:19.334+01:00'
blogger_id: tag:blogger.com,1999:blog-15137028.post-2730014967211464293
blogger_orig_url: http://www.continuousimprover.com/2012/11/the-all-new-coding-guidelines-for-c-30.html
---

<p>After 50000 downloads and the recent final release of Visual Studio 2012 / C# 5.0 it was about time to do a thorough update of the <a href="http://csharpguidelines.codeplex.com/">C# Coding Guidelines</a>. Although most of the guidelines have been preserved, I’ve tried to rewrite several of them using a less formal and less verbose writing style. I’ve also improved the rational for some of them, shortened the introduction section, but added a refactoring heuristic I picked up from <a href="http://lostechies.com/derickbailey/2012/10/31/abstraction-the-rule-of-three">this</a> blog post. </p> <p>Other minor improvements include getting rid of the vague term <em>identifier</em>, applying the correct usage of the terms <em>arguments</em> and <em>parameters</em>, adding more cross-references between guidelines and adding various links to relevant articles. On the esthetic side, I’ve changed all code snippets to Consolas, reduced the line-spacing a bit, and changed the accent color to allow this version to stand out more from previous versions. </p> <p><font color="#333333"><strong>So which guidelines were changed?</strong></font></p> <ul> <li>Added a warning to AV1001 “Only create a constructor that returns a useful object” about potentially violating AV1000 and AV1561.  <li>AV1008 “Mark classes that only contain static members as static” now promotes avoiding static classes at all rather than just marking it as static.  <li>Added a reference to the Command Query Separation principle to AV1105 “Use a method instead of a property”.  <li>Added a reference to the new .NET 4.5 read-only collection interfaces to AV1130 “Return an IEnumerable&lt;T&gt; or ICollection&lt;T&gt; instead of a concrete collection class”. <li>Renamed AV1135 “String, list and collection properties should never return a null reference” to include methods and parameters in addition to properties  <li>Rephrased AV1140 “Consider replacing properties using primitive types to use rich value objects” to clarify that I was talking about domain-specific types. <li>Remove the incorrect examples from AV1515 “Don’t use "magic” numbers” <li>Renamed AV1521 “Initialize variables at the point of declaration” to make it clear we want variables to be declared and initialized as a late as possible. <li>Removed the 'method' part of AV1532 “Don’t use nested loops in a method” to say that nested loops should be avoid everywhere. <li>Renamed AV1535 “Add a block after all flow control keywords, even if it is empty” so that it includes concrete keywords rather than the vague 'flow control keywords'  <li>Added a reference to AV1553 “Only use optional parameters to replace overloads” about Eric Lippert’s post on <a href="http://blogs.msdn.com/b/ericlippert/archive/2011/05/09/optional-argument-corner-cases-part-one.aspx">optional parameter corner cases</a>. <li>Removed an example from AV1720 “Name methods using verb-object pair” because it conflicted with some of the LINQ extension methods introduced in .NET 3.0.  <li>Rewrote and renamed AV1725 “Name namespaces according a well-defined pattern” to clearly explain the valid aspects of a namespace rather than emphasizing a particular pattern. <li>Changed the example in AV1735 “Use a verb or verb phrase to name an event” to use a generic event handler delegate. <li>Added a reference to to the .NET 4.5 read-only collection classes to AV1800 “Consider using Any() to determine whether an IEnumerable&lt;T&gt; is empty”.&nbsp; <li>Added a statement to AV2207 “Don’t hardcode strings that change based on the deployment” that deployment-specific settings should be in the application configuration files rather than hard-coded or in a custom configuration file.  <li>Added a remark to AV2400 “Use a common layout” not to interweave the <em>from</em> expressions with <em>where conditions.</em></li></ul> <p><strong>And what did I add?<br></strong>The following guidelines have been added, of which, for obviously reasons, most are related to C# 5.0.</p> <ul> <li>Added AV1137 "Define parameters as specific as possible" to prevent people from passing in entire objects even though a method might only need a specific property’s value. <li>Added AV1215 "Properly handle exceptions in asynchronous code" to explain the differences between exceptions raised in Actions and await blocks. <li>Added AV1523 "Initialize each variable on a separate line" to prevent some ugly code. <li>Added AV1739 "Use an underscore for irrelevant lamba parameters" as suggested by <a href="https://twitter.com/JamesLanng">James Lanng</a>. <li>Added AV1755 "Postfix asynchronous methods with Async of TaskAsync"  <li>Added AV1820 "Only use async for low-impact long-running activities"  <li>Added AV1825 "Prefer Task.Run for CPU intensive activities"  <li>Added AV1830 "Beware of mixing up await/async with Task.Wait"  <li>Added AV1835 "Beware of async/await deadlocks in single-threaded environments"  <ul><!--EndFragment--></ul></li></ul> <p><strong>“But wait, didn’t you remove anything?”<br></strong>Of course I did! Why do you think the number of pages went from 31 to 27? Well, yes, reducing line-spacing was part of that, but I actually did remove some guidelines.</p> <ul> <li>Removed AV1120 "Use a public static readonly field to define predefined value objects " since I think it is not that important and not used very often. <li>Removed AV1245 “Don’t add extension methods to the same namespace as the extended class” because I think it is pretty farfetched if you create a class in a .NET namespace. <li>Removed AV1526 “Use an enumeration instead of a list of strings if the list of values is finite” since enumerations are so common these days, I hope nobody thinks of an alternative solution. <li>Merged AV1546 “Prefer conditional statements instead of simple if-else constructs” into AV1545 “Don’t use selection statements instead of a simple assignment or initialization”. <li>Removed AV1580 “Consider abstracting an external dependency or 3rd party component” because its essence is already covered by other guidelines and the introduction discussing SOLID principles.&nbsp;&nbsp; <li>Removed AV2211 “Avoid suppressing specific compiler warnings” since I wonder how many developers even know how to suppress compiler warnings. <li>Removed AV2315 “Don’t use /* */ for comments” since we want to avoid inline comments anyhow.<!--EndFragment--></li></ul> <p>You can download the PDFs of the document itself, the cheat sheet, the Visual Studio 2010/2012 Code Analysis rule sets, and the ReSharper 6/7 Code Analysis settings from the <a href="http://csharpguidelines.codeplex.com/releases/view/98254">download page</a> on the CodePlex landing page. </p> <p>And don’t forget! If you have any feedback, additions or any remarks, contact me through <a href="https://twitter.com/#!/ddoomen">Twitter</a> or <a href="mailto:dennis.doomen@avivasolutions.nl">email</a>. </p>  