---

title: 'ALM Practices Part 11: Modeling the business domain using Domain Models'
date: '2010-08-25T09:10:00.000+02:00'

tags:
- ALM Practices
- dotnetmag
- Quality
modified_time: '2010-08-25T10:36:45.902+02:00'
thumbnail: http://lh5.ggpht.com/_sv2gnsft17w/THS2Ez9RnlI/AAAAAAAAGjQ/MZqkWz5zBXc/s72-c/clip_image002%5B7%5D_thumb%5B2%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-15137028.post-1812004517985814858
blogger_orig_url: http://www.continuousimprover.com/2010/08/alm-practices-part-11-modeling-business.html
---

<strong>What is it?</strong>   <br />A domain model is typically depicted by a UML class diagram in which the classes and associations represent the business concepts and the relationships between them. Although you can use a piece of paper to draw up a domain model, in most cases a UML case tool is better suited for that. Business concepts such as orders, customers or contracts are represented by classes stereotyped as <em>entity</em>. Associations are used to illustrate the roles which that entity fulfills in in the relationship with other entities. An example of a domain model representing a recipe registration application might look like this:   <br /><a href="http://lh4.ggpht.com/_sv2gnsft17w/THS2EQ06zwI/AAAAAAAAGjI/WY5mWLagrGQ/s1600-h/clip_image002%5B7%5D%5B4%5D.png"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="clip_image002[7]" alt="clip_image002[7]" src="http://lh5.ggpht.com/_sv2gnsft17w/THS2Ez9RnlI/AAAAAAAAGjQ/MZqkWz5zBXc/clip_image002%5B7%5D_thumb%5B2%5D.png?imgmax=800" width="627" height="591" /></a>   <br /><strong>Why would you do it?</strong>   <br />  <ul>   <li>Because a domain model centralizes the concepts and behavior of the business domain at one place </li> </ul>  <ul>   <li>Because while creating it, you'll run into many new important questions on both the static and dynamic aspects of the domain, including constraints, relationships, the business process, roles and responsibilities </li> </ul>  <ul>   <li>Because it can be used to verify that the developers and other team members have the same view on the domain as the business people have. </li> </ul> <strong>What’s the minimum you need to do?</strong>   <br />  <ul>   <li>You should clearly communicate that the domain model should not be confused with a data model. It does not imply anything about the database schema and should not contain specific decisions or changes because of that database.      <br /></li>    <li>Make sure all entities, association roles, attributes, operations and other documentation comply with the <a href="http://www.dennisdoomen.net/2010/08/alm-practices-part-9-ubiquitous.html">Ubiquitous Language</a>.       <br /></li>    <li>Write in your native language, unless company policy says otherwise.      <br /></li>    <li>Avoid bidirectional associations. It makes understanding the life cycle of related entities more difficult and introduces technical complexity that ripples throughout the entire system. I also found that bidirectional associations reduces the obviousness of the user interface, because a bidirectional relationships clouds the parent-child obviousness.      <br /></li>    <li>Always use directional associations. Base those on the conceptional relationship between the entities, not on the way you intend to query the domain for presentation purposes.      <br /></li>    <li>Always add roles to your associations. They may seem obvious, but by thinking about the role, you may find misinterpretations or an opportunity to get more insights in its purpose.      <br /></li>    <li>Don't specify a multiplicity of 1, but always specify the others explicitly.      <br /></li>    <li>Use a composite association when the child's lifecycle is dictated by the parent (like the Recipe-Ingredient association). </li> </ul>  <ul>   <li>Don't include any technical terms or .NET-specific types such as string or integer. Use <em>text</em>, <em>number</em>, <em>money</em> or another type from the <a href="http://www.dennisdoomen.net/2010/08/alm-practices-part-9-ubiquitous.html">Ubiquitous Language</a> instead. </li> </ul>  <ul>   <li>Make sure that the individual class models are small and do not show more than what the model is intended for.      <br /></li>    <li>If an entity has a status attribute, carefully consider what impact each status has on the editability and associations of that entity. If these constraint become very complex, consider modeling the <a href="http://sourcemaking.com/design_patterns/state">State Pattern</a> or choose a design in which every state is represented by a dedicated subclass of the entity.       <br /></li>    <li>Do not include mutual exclusive associations. If you need these, your entity is probably representing multiple conflicting concepts and should be split up in multiple entities. Again, if these are related to a status attribute, see previous remark. </li> </ul> <strong>What’s the usual thing to do?</strong>   <br />  <ul>   <li>Group related entities that change together, have a dependent lifecycle or form a conceptual whole into a so-called <em>aggregate</em> and choose one entity as the entity that controls access to the others. This is called the <em>aggregate root</em>.       <br /></li>    <li>My rule of thumb for finding the right aggregate roots is to create a diagram that only contains the aggregate roots. That diagram should include the most important concepts of your domain and clearly illustrate its dependencies.      <br /></li>    <li>Include detailed constraints on the maximum length of text attributes, ranges of numbers and dates.      <br /></li>    <li>If such constraints tend to repeat itself for the same kind of data (e.g. an email address, ISBN number, credit card number or currency), consider introducing new classes representing domain-specific primitives with the associated constraints. Stereotype these as a <em>value object</em> and use them instead of primitive types. For instance, the above domain model relies on the following value objects. </li> </ul> <a href="http://lh3.ggpht.com/_sv2gnsft17w/THS2FQYZqsI/AAAAAAAAGjY/hm1XnlclkN0/s1600-h/image%5B6%5D.png"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="image" alt="image" src="http://lh4.ggpht.com/_sv2gnsft17w/THS2Fl2hQOI/AAAAAAAAGjg/y3JFi-QoGnQ/image_thumb%5B4%5D.png?imgmax=800" width="620" height="281" /></a>   <br />  <ul>   <li>If you find that the same set of entities have completely different meanings and dynamics depending on the department or organizational unit you ask, and you don't see a chance to get them aligned, you may need to introduce different domain models per organizational unit. This practice is often referred to as having more than one <a href="http://thinkddd.com/blog/2009/02/11/bounded-contexts/">bounded context</a>. In other words, different organizational units require different interpretations of the same domain concepts.       <br /></li>    <li>Consider reading InfoQ's <a href="http://www.infoq.com/minibooks/domain-driven-design-quickly">Domain Driven Design Quickly</a> to get a quick-start into the world of Eric Evans' <a href="http://www.amazon.co.uk/Domain-driven-Design-Tackling-Complexity-Software/dp/0321125215">Domain Driven Design</a>.       <br /></li>    <li>Consider using Sparx’s UML case tool <a href="http://www.sparxsystems.com.au/">Enterprise Architect</a> since it can generate Microsoft Word documents and a HTML version of the models, making it easy to share the models with the business people. </li> </ul>  