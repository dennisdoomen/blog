---

title: Introducing the Silverlight Cookbook
date: '2011-03-07T06:01:00.001+01:00'

tags:
- Visual Studio
- dotnetmag
- Cookbook
- Architecture
- Silverlight
modified_time: '2011-09-29T08:55:53.160+02:00'
blogger_id: tag:blogger.com,1999:blog-15137028.post-7261653706891793223
blogger_orig_url: http://www.continuousimprover.com/2011/03/introducing-silverlight-cookbook.html
---

<p>In the 2nd half of 2010 I was so fortunate to get the chance to build my first enterprise-class line-of-business application written in Silverlight 4. And although I designed my original reference architecture <a href="http://www.dennisdoomen.net/2010/02/silverlight-reference-architecture.html">earlier</a> that year, actually building it is a completely different thing. I learned a lot from that, and also managed to try a few different alternate styles, and I’m quite confident my current architecture should work for a majority of the cases. </p> <p>And that’s exactly why I wrote a <a href="http://www.dennisdoomen.net/search/label/Cookbook">series</a> of posts last year and which I’ll continue soon. And that is also the reason why I started the <a href="http://www.silverlightcookbook.com/">Silverlight Cookbook</a> a month ago. The Silverlight Cookbook is a Codeplex site hosting a Silverlight 4 application that includes most of the complexities you might run into when building a line-of-business application. It’s a spin-off of my previous community effort, <a href="http://thecqrskitchen.codeplex.com/">The CQRS Kitchen</a>, which was an attempt to demonstrate how to build a system using the <a href="http://www.slideshare.net/dennisdoomen/cqrs-and-event-sourcing-an-alternative-architecture-for-ddd">Command Query Responsibility Segregation</a> and Event Sourcing concepts. But because systems that need those aspects are rare, I decided to move my attention to more traditional systems. Nevertheless, the <a href="http://www.dennisdoomen.net/2010/10/my-silverlight-4-reference-architecture.html">commanding</a> pattern from CQRS has found it’s way into the cookbook as well. </p> <p>The Cookbook uses NHibernate 3 in its persistency layer and you may wonder why I’m not using Entity Framework 4 yet. About a year ago I did a <a href="http://www.dennisdoomen.net/2010/03/is-entity-framework-40-ready-for-real.html">small talk</a> on comparing NH 2.1 to EF 4 CTP 3. At that time my conclusion was that although EF was mature enough, NH’s mapping flexibility was much more powerful when you need to work with legacy databases, even though its LINQ implementation was lacking a lot. The major USP for EF was its design-time support, but since in most of my projects I’ll hand-code the domain entities anyway, that’s not something I value much. It’s major flaw (and it still is), is its lack of a <a href="http://ayende.com/Blog/archive/2009/04/24/nhibernate-2nd-level-cache.aspx">2nd level cache</a>. Today we have <a href="http://sourceforge.net/projects/nhibernate/">NHibernate 3.1.0</a> with a very complete built-in LINQ implementation and we have Entity Framework 4.1 RC with fluent mapping and supporting some level of convention-based programming. Still, IMHO that is no match for the power of NH 3.1.0 and <a href="http://fluentnhibernate.org/">Fluent NHibernate</a>. That we still don’t get a 2nd level cache is something I (and quite some members of the community) really don’t understand.</p> <p>Because of the separation between the commanding side, which is based on a traditional WCF service, and the querying side, the Cookbook uses <a href="http://www.dennisdoomen.net/2010/10/my-silverlight-4-reference-architecture_12.html">WCF Data Services</a> for exposing the domain model over a REST interface. And I know that the combination of NHibernate and WCF Data Service is not a <a href="http://www.dennisdoomen.net/2010/09/some-thoughts-on-wcf-data-services-and.html">happy marriage</a> yet, it works reasonably well, especially since version 3 provides much better support for LINQ. In contrast to the <a href="http://wildermuth.com/2008/07/21/NHibernate_LINQ_with_ADO_NET_Data_Services">glue</a> Shawn Wildermuth added in the now deprecated NHibernate.LINQ, NH 3 does not provide anything to hook NH into WCF Data Services. But I <a href="http://silverlightcookbook.codeplex.com/SourceControl/changeset/view/69744#1732716">managed</a> to take his stuff and get it to work with NHibernate 3 in the Cookbook.</p> <p>In terms of automated testing, I’ve switched from Rhino Mocks to <a href="http://code.google.com/p/fakeiteasy/">FakeItEasy</a>. Why? Because <a href="http://www.ayende.com/projects/rhino-mocks.aspx">Rhino Mocks</a> still doesn’t officially support Silverlight (there’s just an <a href="http://www.ayende.com/projects/rhino-mocks/downloads.aspx">alpha version</a>), and it seems <a href="http://www.ayende.com/">Ayende</a> has lost interest in the plans for Rhino Mocks 4. The most recent version, 3.6, dates September 2009. I did consider moving to <a href="http://code.google.com/p/moq/">MOQ</a>, but I don’t like its intermediate Object property. As far as I can tell now, Patrik Hagne, the author of FakeItEasy, has managed to combine the best of MOQ and Rhino Mocks and officially supports Silverlight as well. I’ve moved all the unit tests of <a href="http://fluentassertions.codeplex.com/">Fluent Assertions</a>, my unit test assertion framework to FakeItEasy as well, and am currently using it in a big client project.</p> <p>The backbone of the <a href="http://www.silverlightcookbook.com/">Silverlight Cookbook</a> is provided by <a href="http://caliburnmicro.codeplex.com/">Caliburn Micro</a>. I’ve already blogged, <a href="http://www.dennisdoomen.net/2010/12/night-of-silverlight-wpf-unit-testing.html">talked</a> and tweeted a lot about this beautiful framework, so I won’t repeat how it solves many of the complexities of building Silverlight applications (asynchronity, binding expressions, MVVM). What I do want to mention is that Microsoft’s Patterns &amp; Practices team should seriously consider talking more to <a href="http://devlicio.us/blogs/rob_eisenberg/default.aspx">Rob Eisenberg</a>, the author of both <a href="http://caliburn.codeplex.com/">Caliburn</a> and Caliburn Micro. I wish we knew about it when we started with a WPF project last year.</p> <p>So what about the near future? Well, I’m still checking in changes to the application on a regular basis, and refactoring many parts of it. I see the Cookbook as an ongoing effort to demonstrate and prove new ideas for problems I run into in my daily job. Some of the things I have in mind for the near future include:</p> <ul> <li>Dynamic loading of modules  <li>Deployment-friendly handling of configuration settings  <li>Event Aggregation  <li>Using Reactive Extensions as an alternative to coroutines. </li></ul> <p>As a matter of fact, I’m still looking for people to help me continue improving the Silverlight Cookbook, both on the development side as well as on improving it’s user interface design. So if you’re interested let me know or use the <a href="http://silverlightcookbook.codeplex.com/team/view">Join Us</a> page on the site.. </p> <p>This article is part of a <a href="http://www.dennisdoomen.net/search/label/Cookbook">series</a> of posts dealing with all the choices and solutions used in the <a href="http://silverlightcookbook.codeplex.com/">Silverlight Cookbook</a>. If you have any comments, let me know by commenting or sending me a tweet on <a href="http://twitter.com/#!/ddoomen">@ddoomen</a>.</p>  