---

title: Time to break with the past a.k.a. Fluent Assertions 3.0
date: '2014-05-20T08:27:00.001+02:00'

tags:
- Fluent Assertions
modified_time: '2014-05-20T08:27:24.430+02:00'
thumbnail: http://lh3.ggpht.com/-NHiYMm_FgkE/U3r1vctLU-I/AAAAAAAAKBU/DYCEVWzT3rc/s72-c/clip_image001%25255B4%25255D_thumb%25255B3%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-15137028.post-4911572202825381186
blogger_orig_url: http://www.continuousimprover.com/2014/05/time-to-break-with-past-aka-fluent.html
---

<p>Boy do I love the .NET community. Since I moved <a href="https://www.nuget.org/packages/FluentAssertions">Fluent Assertions</a> to <a href="https://github.com/dennisdoomen/fluentassertions">Github</a>, people have been creating 32 forks and provided me with 37 pull requests. In fact, release 3.0 has been made possible by the likes of <a href="https://github.com/vossad01">Adam Voss</a> (who provided a lot of those pull requests), <a href="http://blog.maartenballiauw.be/">Maarten Balliauw</a> (for setting up a Team City environment) and <a href="https://github.com/onovotny">Oren Novotny</a> (for building and publishing the <a href="https://www.nuget.org/packages/FluentAssertions.Xamarin">Xamarin</a> version). However, that's not all. Other contributions were provided by <a href="https://github.com/kevinkuszyk">Kevin Kuszyk</a>, <a href="https://github.com/cH40z-Lord">Kai Eichinger</a>, <a href="https://github.com/gstamac">Gregor Stamac</a>, <a href="https://github.com/samholder">Sam Holder</a>, <a href="https://github.com/philippdolder">Philipp Dolder</a> and <a href="https://github.com/marklam">Mark Lambert</a>. I can honestly say that this release would not have been possible without those people. Anyway, just in case the <a href="https://github.com/dennisdoomen/fluentassertions/releases/tag/v3.0">release notes</a> are a bit to concise, let me highlight some of the bigger changes in 3.0. <br> <h1><strong>Powered by</strong> </h1> <table cellspacing="0" cellpadding="2" width="500" border="0"> <tbody> <tr> <td valign="top" width="249"><a href="http://lh6.ggpht.com/-t4qU8-0-k-w/U3r1u88En5I/AAAAAAAAKBQ/0kyFsI8vekE/s1600-h/clip_image001%25255B4%25255D%25255B5%25255D.png"><img title="clip_image001[4]" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="clip_image001[4]" src="http://lh3.ggpht.com/-NHiYMm_FgkE/U3r1vctLU-I/AAAAAAAAKBU/DYCEVWzT3rc/clip_image001%25255B4%25255D_thumb%25255B3%25255D.png?imgmax=800" width="240" height="77"></a></td> <td valign="top" width="249"><a href="http://lh4.ggpht.com/-tnBnKhO7nNE/U3r1vzPCwzI/AAAAAAAAKBc/O6f9MeCro-c/s1600-h/clip_image002%25255B4%25255D%25255B3%25255D.png"><img title="clip_image002[4]" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="clip_image002[4]" src="http://lh5.ggpht.com/-BOMNh9KcwpM/U3r1wWvNs2I/AAAAAAAAKBk/yoji0axpfEo/clip_image002%25255B4%25255D_thumb%25255B1%25255D.png?imgmax=800" width="229" height="64"></a></td></tr> <tr> <td valign="top" width="249"><a href="http://lh5.ggpht.com/-AWAx0KyUbJk/U3r1w6iz9kI/AAAAAAAAKBs/CkWoLGNpE8M/s1600-h/clip_image003%25255B4%25255D%25255B3%25255D.gif"><img title="clip_image003[4]" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="clip_image003[4]" src="http://lh3.ggpht.com/-M4RBKmdIixs/U3r1xYiTo_I/AAAAAAAAKB0/oGpieAOKVPw/clip_image003%25255B4%25255D_thumb%25255B1%25255D.gif?imgmax=800" width="240" height="54"></a></td> <td valign="top" width="250"><a href="http://lh3.ggpht.com/-vUb6jPqluig/U3r1x01FrQI/AAAAAAAAKCA/V20HhGSuNRA/s1600-h/clip_image004%25255B4%25255D%25255B3%25255D.png"><img title="clip_image004[4]" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="clip_image004[4]" src="http://lh4.ggpht.com/-t9qYcIM0m2Y/U3r1yhw3t5I/AAAAAAAAKCI/NHpmk3fxWw8/clip_image004%25255B4%25255D_thumb%25255B1%25255D.png?imgmax=800" width="240" height="95"></a></td></tr></tbody></table> <p>The biggest problem in terms of maintenance has been the work to support the different framework and device variants of the .NET Framework. Up until recently we had to use file links to get the same set of source files compiled into different projects. Because that has been so cumbersome, at some point I started to become reluctant in refactoring classes into new ones, just because that would mean fixing up those file links. Some of my Twitter followers tried to talk me into using <a href="http://msdn.microsoft.com/en-us/library/gg597391(v=vs.110).aspx">Portable Class Libraries</a>, but saying that that conversion was a challenge is an understatement, in particular the mechanisms to hook the framework-specific parts into the PCL.  <p>Anyway, as of version 3.0, FluentAssertions consists out of a single PCL assembly post fixed with .Core and one platform-specific assembly. The only drawback of this is that you need to retarget your unit test project to .NET 4.0.3 (which is Update 3 that was released in March 2012). However, if you're working with Visual Studio 2013, you already have the 4.5 runtime installed and you just need to get the Targeting Pack for .NET 4.0.3 which Visual Studio will download automatically for you. For that same reason, we also dropped support for .NET 3.5. If you are so unfortunate to still have to develop in that version of the .NET framework, stick with 2.2. It's in maintenance mode, which means we'll still fix bugs if necessary. <p>Since we use <a href="http://semver.org/">Semantic Versioning</a>, the bump to 3.0 clearly means it contains breaking changes. So we took that opportunity to remove some of the stuff that was marked as obsolete. Amongst them is the old API for asserting the structural equality of two object graphs <font face="courier ne">ShouldHave().AllProperties().Equal()</font> which was superseded by the <font face="Courier New">ShouldBeEquivalentTo</font> syntax and the <font face="Courier New">ComparisonMode</font> enumeration that was used during exception message assertions. <p>Reading back on the post, you must be thinking that 3.0 is just a step back. But it also contains some nice improvements as well as a few important bug fixes. One neat feature is the ability to chain a specific assertion on top of an assertion that acts on a collection or graph of objects. It's something we've been looking for for a long time, but it was <a href="https://github.com/samholder">Sam Holder</a> that proposed this syntax. <p><font face="Courier New">dictionary.Should().ContainValue(myClass).Which.SomeProperty.Should().BeGreaterThan(0);</font> <p><font face="Courier New">someObject.Should().BeOfType&lt;Exception&gt;().Which.Message.Should().Be("Other Message");</font> <p><font face="Courier New">xDocument.Should().HaveElement("child").Which.Should().BeOfType&lt;XElement&gt;().And.HaveAttribute("attr", "1");</font> <p>I've run into quite a few of these scenarios in which this chaining would make the unit test a lot easier to read. But, as usual, don't overdo it.  <p>Another little improvement is that you can now assert two XElement objects and their children for equality. Granted, it's a first implementation, but know that we're working on supporting a more advanced implementation that will ignore the order of attributes, whitespace and other typical non-relavant XML junk.  <p>So what's planned for <a href="https://github.com/dennisdoomen/fluentassertions/issues?milestone=3&amp;page=1&amp;state=open">3.1</a>? Well, Oren (Novotny) already provided me with a pull request for supporting Windows Phone 8.1 (the Windows Runtime based). And as soon as Maarten completed support for Visual Studio 2013 Update 2 on the <a href="http://teamcity.codebetter.com/project.html?projectId=FluentAssertions&amp;tab=projectOverview">CodeBetter TeamCity</a> server, I will move the XML-specific parts of the PCL library in a Shared Project. This should fix the current requirement to target .NET 4.0.3. So if you can't wait for the official release, add our <a href="https://www.myget.org/gallery/fluentassertions">MyGet feed</a> as a NuGet Package Source and start testing against the latest commits. </p>  